# Metasploit Exploit Example
#pentest #pentest/tryhackme/metasploit

## Running nmap 
`db_nmap -sV BOX-IP`

## To see which hosts we scanned:
`hosts`

## To list services found
`services`

## To see discovered vulnerabilities for these services
`vulns`

## Set the attack payload after picking an exploit
`set PAYLOAD <payload>`

## Running an exploit
`exploit` or `run -j` to run as a job

## To see jobs running
`jobs`

## See sessions
`sessions`

## Connecting to a session
`sessions -i SESSION_NUMBER`

## After connect we will be in the process that the exploit managed to break into, time to pivot to a new process
`migrate <PID>`  if possible of the spoolsv.exe service on windows since it will always match the architecture of our system

## If it fails we need to check more info about the current user and the system itself and get our list of privileges
`getuid` followed by `sysinfo` followed by `getprivs`

## Loading the new version of mimikatz (another exploit)
`load kiwi`

## A few post exploits
**Check if a machine is a a VM**:  `run post/windows/gather/checkvm`
**Check possible escalation exploits**: `run post/multi/recon/local_exploit_suggester`

## Try to enable remote desktop protocol
`run post/windows/manage/enable_rdp`

## Open a windows shell from metasploit
`shell`

## Run the command `run autoroute -h`, this will pull up the help menu for autoroute. What command do we run to add a route to the following subnet: 172.18.1.0/24?

